package com.ws.ldy.common.utils;import com.baomidou.mybatisplus.core.metadata.IPage;import com.baomidou.mybatisplus.extension.plugins.pagination.Page;import org.springframework.beans.BeanUtils;import java.util.ArrayList;import java.util.List;import java.util.stream.Collectors;/** * TODO  Dto，Vo，entity 转换工具类 * <p> * dot ,Do ,entity 相互转换， 采用 org.springframework.beans.BeanUtils 包,同：BeanUtils.copyProperties(dtoEntity, newInstance); * <p> * * @param oldClass 原数据--Dto，Vo，entity * @param newClass 转换为--Dto，Vo，entity */@SuppressWarnings("all")public class BeanDtoVoUtil<V, E> {    /**     * TODO  dot ,Do ,entity 相互转换     * 同：BeanUtils.copyProperties(dtoEntity, newInstance);     *     * @param oldClass 原数据--Dto，Vo，entity     * @param newClass 转换为--Dto，Vo，entity     * @return     */    public static <E> E convert(Object oldClass, Class<E> newClass) {        // 判断oldClass 是否为空!        if (oldClass == null) {            return null;        }        // 判断newClass 是否为空        if (newClass == null) {            return null;        }        try {            // 创建新的对象实例            E newInstance = newClass.newInstance();            // 把原对象数据拷贝到新的对象            BeanUtils.copyProperties(oldClass, newInstance);            // 返回新对象            return newInstance;        } catch (Exception e) {            e.printStackTrace();            return null;        }    }    /**     * TODO   Page<Entity> 分页对象转 Page<Vo>  ( list 循环)     *     * @param page     * @param v     * @return com.baomidou.mybatisplus.core.metadata.IPage<V>     * @author ws     * @mail 1720696548@qq.com     * @date 2020/4/23 0023 11:26     */    public static <T, V> IPage<V> pageVo(Page<T> page, Class<V> v) {        IPage<V> vs = page.convert(item -> {            try {                V newv = (V) BeanDtoVoUtil.convert(item, v.newInstance().getClass());                return newv;            } catch (Exception e) {                e.printStackTrace();            }            return null;        });        return vs;    }    /**     * TODO   list<Entity> 集合对象转list<Vo> ( list 循环)     *     * @param page     * @param v     * @return com.baomidou.mybatisplus.core.metadata.IPage<V>     * @author ws     * @mail 1720696548@qq.com     * @date 2020/4/23 0023 11:26     */    public static <T, V> List<V> listVo(List<T> oldList, Class<V> v) {        try {            List<V> voList = new ArrayList<>();            for (T t : oldList) {                V newv = (V) BeanDtoVoUtil.convert(t, v.newInstance().getClass());                voList.add(newv);            }            return voList;        } catch (Exception e) {            e.printStackTrace();        }        return null;    }    /**     * TODO  list<Entity> 集合对象转list<Vo> （Stream 方式）     *     * @param page     * @param v     * @return com.baomidou.mybatisplus.core.metadata.IPage<V>     * @author ws     * @mail 1720696548@qq.com     * @date 2020/4/23 0023 11:26     */    public static <T, V> List<V> listVoStream(List<T> oldList, Class<V> v) {        List<V> voList = oldList.stream().map(item -> {            try {                return (V) BeanDtoVoUtil.convert(item, v.newInstance().getClass());            } catch (InstantiationException e) {                e.printStackTrace();            } catch (IllegalAccessException e) {                e.printStackTrace();            }            return null;        }).collect(Collectors.toList());        return voList;    }}