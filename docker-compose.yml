version: "3.6"
services:
  #  nginx:
  #    image: "nginx"           # 镜像名称
  #    container_name: "nginx"   # 容器名字
  #    restart: "always"         # 开机自动重启
  #    ports:                  # 端口号绑定（宿主机:容器内）
  #      - '80:80'
  #      - '443:443'
  #    volumes:                # 目录映射（宿主机:容器内）
  #      - "./nginx/conf/nginx.conf:/etc/nginx/nginx.conf"
  #      - "./nginx/conf.d:/etc/nginx/conf.d"
  #      - "./nginx/html:/usr/share/nginx/html"
  #
  mysql:
    image: "mysql:5.7.29"
    container_name: "mysql5.7"
    environment:
      MYSQL_ROOT_PASSWORD: "123456"
    volumes:
      - "./mysql/mysql5.7/data:/data/mysql"
      - "./mysql/mysql5.7/conf/my.cnf:/etc/my.cnf"
    ports:
      - "3306:3306"

  redis:
    image: "redis:latest"
    container_name: "redis"
    restart: "always"
    ports:
      - "6379:6379"
    volumes:
      - "./redis/conf/redis.conf:/etc/redis/redis.conf:rw"
      - "./redis/redis-data/:/data:rw"
    command:
      # 执行的命令
      "redis-server /etc/redis/redis.conf --appendonly yes"