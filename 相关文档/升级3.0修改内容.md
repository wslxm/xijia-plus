mavee查询地址： https://search.maven.org/
使用v-3.0.0 版本启动项目需增加jvm参数，允许使用反射
```
--add-opens java.base/java.lang=ALL-UNNAMED
--add-opens java.base/java.util=ALL-UNNAMED
```

# 升级处理内容一览

## mybatis-plus 升级

- mybatis-plus 升级为 3.5.2.7-SNAPSHOT (兼容 springboot3.0 升级)
- 目前需连接 mybatis-plus 的仓库拉取

## javax -> jakarta 替换

所有 javax. 相关包变更为 jakarta.

- 包括 session /request /response /validation (jdk 升级需变动)

## druid 移除

- 移除数据源druid (不兼容)
- 移除druid相关配置，yml 以及 public ServletRegistrationBean statViewServlet() { //   (druid 不兼容需变动)

## redis |redisson 升级

- redis redisson 3.13.6 升级为 3.18.1 (兼容springboot3.0)
- RedisUtil redis delete(String... key) 处理 (未验证/测试)
-

## 增加 guava

增加依赖 guava 3.1.2  (依赖包redisson升级后导致继承依赖丢失增加)

## swagger 移除 (不兼容)

- 移除 xj-swagger 模块  (不兼容移除, 可使用 yapi 进行平替)
- 移除 xj-websocket/ xj-redis / xj-base-file /xj-base-admin 中所有swagger 相关代码  (不兼容变动)
- 移除swagger后，增加对应的相关 java doc注释 (不兼容变动)

平替方案

- 1、使用 yapi 进行平替 (需搭建yapi服务)， idea 安装 EasyApi 进行自动生成文档
- 2、使用 postman 进行平替, 下载postman 软件, idea 安装 EasyApi 插件进行自动生成文档
- 3、java 原生 doc 文档，idea菜单中工具,生成doc文档进行生成

## 接口管理

- 移除swagger后 接口扫描 无法获取类描述和方法描述处理 (不兼容变动)
- 类描述修正暂使用 类名
- 方法描述修正暂使用 方法uri 地址

## 日志记录

- 移除swagger后 日志记录 无法获取类描述和方法描述处理 (不兼容变动)
- 类描述修正暂使用 类名
- 方法描述修正暂使用 方法uri 地址
- 移除swagger后 接口管理 无法获取类描述和方法描述处理 (不兼容变动)

## 跨域  (不兼容变动)

- 升级导致的跨域问题处理 CorsConfig
-
- 原： // corsConfiguration.addAllowedOrigin("*"); // 升级springboot3.0后会报跨域错误，同时提示使用addAllowedOriginPattern
- 现： corsConfiguration.addAllowedOriginPattern("*");

## 反射 (jdk 升级后禁止反射)

java.lang 下反射错误，如： private static final long serialVersionUID 修改为 private static final long serialVersionUID
以及其他反射错误

增加jvm参数

```base
--add-opens java.base/java.lang=ALL-UNNAMED
--add-opens java.base/java.util=ALL-UNNAMED

--add-opens java.base/指定包...=ALL-UNNAMED
```

## 登录jwt生成错误  (不兼容变动)

Handler dispatch failed: java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter
异常类:jakarta.servlet.ServletException

```base
 <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.3.0</version>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
            <version>2.3.0</version>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-core</artifactId>
            <version>2.3.0</version>
        </dependency>
        <dependency>
            <groupId>javax.activation</groupId>
            <artifactId>activation</artifactId>
            <version>1.1.1</version>
        </dependency>
```

## cglib 移除

- 移除cglib，因为它不兼容，但spring 通过了新的cglib，他和原cglib使用完全一致  (不兼容变动)
    - 1、cglib版本问题：参考文章：https://blog.csdn.net/guoshengkai373/article/details/127319933
    - 2、cglib反射问题： https://blog.csdn.net/LuckFairyLuckBaby/article/details/126849116

反射错误导致

## 代码生成优化

优化controller 模板 DemoController.tp , swagger注释修改为doc注释 



